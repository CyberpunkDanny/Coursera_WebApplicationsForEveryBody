CREATE DATABASE studentCourseMgmt DEFAULT CHARACTER SET utf8;


CREATE TABLE course(
	course_id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
   	course_name VARCHAR(128),
    PRIMARY KEY(course_id)
);

CREATE TABLE student(
	student_id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
    student_name VARCHAR(128),
    PRIMARY KEY(student_id)
);

CREATE TABLE member(
	course_id INTEGER UNSIGNED,
    student_id INTEGER UNSIGNED,
    role INTEGER UNSIGNED,
    PRIMARY KEY(course_id, student_id),
    CONSTRAINT FOREIGN KEY(course_id) REFERENCES course(course_id) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT FOREIGN KEY(student_id) REFERENCES student(student_id) ON DELETE CASCADE ON UPDATE CASCADE
);


INSERT INTO student(student_name) VALUES("Danny");
INSERT INTO student(student_name) VALUES("Sammy");
INSERT INTO student(student_name) VALUES("Daniel");

INSERT INTO course(course_name) VALUES("Python");
INSERT INTO course(course_name) VALUES("PHP");
INSERT INTO course(course_name) VALUES("SQL");

INSERT INTO member(course_id, student_id, role) VALUES(1, 1, 1);
INSERT INTO member(course_id, student_id, role) VALUES(1, 2, 0);
INSERT INTO member(course_id, student_id, role) VALUES(1, 3, 0);
INSERT INTO member(course_id, student_id, role) VALUES(2, 1, 0);
INSERT INTO member(course_id, student_id, role) VALUES(2, 2, 1);
INSERT INTO member(course_id, student_id, role) VALUES(3, 2, 1);
INSERT INTO member(course_id, student_id, role) VALUES(3, 3, 0);

INSERT INTO role(role_type) VALUES("Student");
INSERT INTO role(role_type) VALUES("Instructor");


ALTER TABLE member ADD CONSTRAINT FOREIGN KEY(role) REFERENCES role(role_id); 